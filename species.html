<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Species Tracking - Whale Migration Guide</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="description" content="Track individual whale species migration patterns with animated heatmaps showing blue whales, humpback whales, and sperm whales.">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.17.0-beta.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.17.0-beta.1/mapbox-gl.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="page-enter">
    <!-- Navigation Bar -->
    <nav id="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">
                <span class="whale-icon">üêã</span>
                <span class="brand-text">Whale Migration Guide</span>
            </a>
            <div class="nav-links">
                <a href="index.html" class="nav-link">Density Map</a>
                <a href="species.html" class="nav-link active">Species Tracking</a>
                <a href="whale-species-gallery.html" class="nav-link">Whale Species</a>
                <a href="whale-locations-gallery.html" class="nav-link">Locations</a>
                <a href="about.html" class="nav-link">About</a>
            </div>
        </div>
    </nav>

    <!-- Description Section -->
    <div id="description">
        <h1>Individual Species Migration Tracking</h1>
        <p>
            This animated map shows individual heatmaps of whale observations for three species plotted simultaneously. 
            Data sourced from <a href="https://www.gbif.org" target="_blank" rel="noopener noreferrer">GBIF</a> includes: 
            <strong>Blue whales (2006-2025)</strong>, <strong>Humpback whales (2017-2025)</strong>, and 
            <strong>Sperm whales (2006-2025)</strong>. Watch how each species' distribution changes month by month, 
            with distinct colors showing spatial overlap.
        </p>
        <p>
            <strong>Toggle species visibility</strong> using the checkboxes in the control panel, or adjust animation settings 
            to customize your viewing experience.
        </p>
    </div>

    <!-- Map Container -->
    <div id="map">
        <!-- Main Controls -->
        <div id="controls">
            <div class="control-header">Month Controls</div>
            <div class="month-display">
                <span id="monthLabel">January</span>
            </div>
            <input id="monthSlider" type="range" min="1" max="12" step="1" value="1">
            <button id="playPause" class="control-button">Pause</button>
            
            <!-- Species toggles -->
            <div style="margin-top: 14px; font-weight: 600; font-size: 13px; color: var(--primary); text-transform: uppercase; letter-spacing: 0.05em;">Species</div>
            <label class="species-toggle">
                <input type="checkbox" data-layer="sperm_2019_heat" checked>
                <span style="color: #d7263d;">‚óè</span> Sperm whales
            </label>
            <label class="species-toggle">
                <input type="checkbox" data-layer="humpback_2019_heat" checked>
                <span style="color: #00a65a;">‚óè</span> Humpback whales
            </label>
            <label class="species-toggle">
                <input type="checkbox" data-layer="blue_2008_heat" checked>
                <span style="color: #0066ff;">‚óè</span> Blue whales
            </label>
        </div>

        <!-- Animation Controls Panel -->
        <div id="animPanel">
            <div id="animPanelHeader">
                <span>Animation Controls</span>
                <span id="animPanelArrow">‚ñ∏</span>
            </div>
            <div id="animPanelBody">
                <label for="phaseSlider">Transition Position</label>
                <input id="phaseSlider" type="range" min="0" max="1" step="0.01" value="0">
                <small>0 = start of month, 1 = next month</small>

                <label for="durationInput">Seconds Per Month</label>
                <input id="durationInput" type="number" min="0.1" step="0.1" value="1.5">
                <small>Lower = faster, higher = slower</small>

                <label for="blurSlider">Blur Strength</label>
                <input id="blurSlider" type="range" min="0" max="2" step="0.1" value="0.5">
                <small>Controls transition smoothness</small>
            </div>
        </div>

        <!-- Caption Bar -->
        <div id="captionBar">
            <span style="color: #d7263d;">‚óè</span> Sperm whales &nbsp;‚Ä¢&nbsp; 
            <span style="color: #00a65a;">‚óè</span> Humpback whales &nbsp;‚Ä¢&nbsp; 
            <span style="color: #0066ff;">‚óè</span> Blue whales &nbsp;‚Äî&nbsp; 
            Monthly density animation (Jan‚ÄìDec)
        </div>

        <!-- Month Display -->
        <div id="monthBottom">January</div>

        <!-- Legend -->
        <div id="legend">
            <div class="legend-title">Observation Density</div>
            <div class="legend-row">
                <div class="legend-color legend-red"></div>
                <div>Sperm whale</div>
            </div>
            <div class="legend-row">
                <div class="legend-color legend-green"></div>
                <div>Humpback whale</div>
            </div>
            <div class="legend-row">
                <div class="legend-color legend-blue"></div>
                <div>Blue whale</div>
            </div>
            <div class="legend-note">
                Brighter color = higher observation density for that species.
            </div>
        </div>
    </div>

    <script src="whale-species.js"></script>
    <script src="config.js"></script>
    <script src="species-map.js"></script>
</body>
</html>
